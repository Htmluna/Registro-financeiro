{# Indica que este template herda a estrutura e blocos do template 'base.html'. #}
{% extends 'base.html' %}

{# Define o título da página que aparecerá na aba do navegador. #}
{% block title %}Redefinir Senha{% endblock %}

{# Início do bloco principal de conteúdo ('content'). #}
{% block content %}

    {# Título principal visível na página. #}
    <h1>Redefinir Senha</h1>
    {# Início do formulário. `method="post"` envia os dados de forma segura (não na URL). #}
    <form method="post">
        {# Renderiza campos ocultos do formulário, como o token CSRF, essencial para segurança. #}
        {{ form.hidden_tag() }}

        {# Agrupamento para o campo 'username'. #}
        <div class="form-group">
            {# Renderiza a tag <label> para o campo 'username'. #}
            {{ form.username.label }}
            {# Renderiza o campo <input> para 'username'.
               `class='form-control'` aplica estilo padrão do Bootstrap. #}
            {{ form.username(class='form-control') }}
            {# Loop para exibir erros de validação para o campo 'username', se houver. #}
            {% for error in form.username.errors %}
                {# Exibe cada erro em texto pequeno e vermelho (classe Bootstrap 'text-danger'). #}
                <small class='text-danger'>{{ error }}</small>
            {% endfor %} {# Fim do loop de erros para 'username'. #}
        </div>

        {# Agrupamento para o campo 'new_password' (nova senha). #}
        <div class="form-group">
            {# Renderiza a tag <label> para 'new_password'. #}
            {{ form.new_password.label }}
            {# Renderiza o campo <input type="password"> para 'new_password'. #}
            {{ form.new_password(class='form-control') }}
            {# Loop para exibir erros de validação para 'new_password'. #}
            {% for error in form.new_password.errors %}
                <small class='text-danger'>{{ error }}</small>
            {% endfor %} {# Fim do loop de erros para 'new_password'. #}
        </div>

        {# Agrupamento para o campo 'confirm_password' (confirmação da nova senha). #}
        <div class="form-group">
            {# Renderiza a tag <label> para 'confirm_password'. #}
            {{ form.confirm_password.label }}
            {# Renderiza o campo <input type="password"> para 'confirm_password'. #}
            {{ form.confirm_password(class='form-control') }}
            {# Loop para exibir erros de validação para 'confirm_password' (ex: senhas não conferem). #}
            {% for error in form.confirm_password.errors %}
                <small class='text-danger'>{{ error }}</small>
            {% endfor %} {# Fim do loop de erros para 'confirm_password'. #}
        </div>

        {# Renderiza o botão de submissão do formulário (ex: "Redefinir Senha").
           `class='btn btn-primary'` aplica estilo Bootstrap de botão principal (azul). #}
        {{ form.submit(class='btn btn-primary') }}
        {# Link (estilizado como botão secundário) para cancelar a ação e voltar para a página de login.
           `url_for('login')` gera dinamicamente o URL da rota/view 'login'. #}
        <a href="{{ url_for('login') }}" class="btn btn-secondary">Cancelar</a>
    </form> {# Fim do formulário. #}
{# Fim do bloco 'content'. #}
{% endblock %}
